(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dtfw"],{"0a49":function(t,i,e){var n=e("9b43"),o=e("626a"),s=e("4bf8"),r=e("9def"),a=e("cd1c");t.exports=function(t,i){var e=1==t,c=2==t,u=3==t,h=4==t,l=6==t,p=5==t||l,d=i||a;return function(i,a,f){for(var w,v,m=s(i),b=o(m),g=n(a,f,3),M=r(b.length),k=0,A=e?d(i,M):c?d(i,0):void 0;M>k;k++)if((p||k in b)&&(w=b[k],v=g(w,k,m),t))if(e)A[k]=v;else if(v)switch(t){case 3:return!0;case 5:return w;case 6:return k;case 2:A.push(w)}else if(h)return!1;return l?-1:u||h?h:A}}},1169:function(t,i,e){var n=e("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"296a":function(t,i,e){"use strict";e("ae84")},"2f21":function(t,i,e){"use strict";var n=e("79e5");t.exports=function(t,i){return!!t&&n((function(){i?t.call(null,(function(){}),1):t.call(null)}))}},"6d67":function(t,i,e){"use strict";var n=e("5ca1"),o=e("0a49")(1);n(n.P+n.F*!e("2f21")([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},"8b2c":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"container-wrapper"},[t._m(0),i("div",{attrs:{id:"map-container"}},[i("div",{attrs:{id:"container"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isWeatherVisible,expression:"isWeatherVisible"}],staticClass:"info",attrs:{id:"weatherPanel"}},[i("h4",[t._v("预报天气")]),i("hr"),i("p",{attrs:{id:"forecast"}})])]),i("div",{staticClass:"input-card"},[i("div",{staticClass:"input-item"},[i("input",{attrs:{type:"checkbox",checked:""},on:{change:function(i){return t.toggleScale(i)}}}),t._v(" 比例尺\n    ")]),i("div",{staticClass:"input-item"},[i("input",{attrs:{type:"checkbox",checked:"",id:"toolbar"},on:{change:function(i){return t.toggleToolBar(i)}}}),t._v(" 工具条\n    ")]),i("div",{staticClass:"input-item"},[i("input",{attrs:{type:"checkbox",checked:"",id:"controlBar"},on:{change:function(i){return t.toggleControlBar(i)}}}),t._v(" 工具条方向盘\n    ")]),i("div",{staticClass:"input-item"},[i("input",{attrs:{type:"checkbox",checked:"",id:"overview"},on:{change:function(i){return t.toggleOverViewShow(i)}}}),t._v(" 显示鹰眼\n    ")]),i("div",{staticClass:"input-item traffic-control"},[i("button",{staticClass:"btn",on:{click:t.toggleTraffic}},[t._v("\n        "+t._s(t.isTrafficVisible?"隐藏实时路况":"显示实时路况")+"\n      ")])]),i("div",{staticClass:"input-item weather-control"},[i("button",{staticClass:"btn",on:{click:t.toggleWeather}},[t._v("\n        "+t._s(t.isWeatherVisible?"隐藏天气预报":"显示天气预报")+"\n      ")])]),i("div",{staticClass:"input-item business-district-control"},[i("div",{staticClass:"dropdown",attrs:{id:"businessDistrictDropdown"},on:{click:function(i){return i.stopPropagation(),t.toggleDropdown.apply(null,arguments)}}},[i("button",{staticClass:"dropdown-btn"},[t._v("\n          选择商圈 "),i("i",{staticClass:"fas fa-chevron-down",style:{transform:t.dropdownActive?"rotate(180deg)":"none"}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.dropdownActive,expression:"dropdownActive"}],staticClass:"dropdown-content"},[i("button",{on:{click:function(i){return t.goToBusinessDistrict("新街口商圈:<br>德基广场、中央商场、新百等",[118.784136,32.041806])}}},[t._v("新街口商圈")]),i("button",{on:{click:function(i){return t.goToBusinessDistrict("夫子庙商圈:<br>水游城、水平方、万象天地等",[118.781871,32.021797])}}},[t._v("夫子庙商圈")]),i("button",{on:{click:function(i){return t.goToBusinessDistrict("元通商圈:<br>IFC、华采天地、龙湖河西天街等",[118.7211449,31.995371])}}},[t._v("元通商圈")]),i("button",{on:{click:function(i){return t.goToBusinessDistrict("江东商圈:<br>金鹰世界、建邺万达广场等",[118.73968,32.028573])}}},[t._v("江东商圈")]),i("button",{on:{click:function(i){return t.goToBusinessDistrict("江北商圈:<br>江北虹悦城、宝龙时代广场等",[118.642525,32.06958])}}},[t._v("江北商圈")]),i("button",{on:{click:function(i){return t.goToBusinessDistrict("桥北商圈:<br>南京弘阳广场、桥北万象汇等",[118.726639,32.134721])}}},[t._v("桥北商圈")]),i("button",{on:{click:function(i){return t.goToBusinessDistrict("百家湖商圈:<br>景枫中心、金鹰天地广场等",[118.820845,31.931942])}}},[t._v("百家湖商圈")]),i("button",{on:{click:function(i){return t.goToBusinessDistrict("仙林商圈:<br>金鹰湖滨天地、九霄梦天地等",[118.930412,32.098663])}}},[t._v("仙林商圈")])])])])])])},o=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"header"},[i("h1",[t._v("八大商圈地图服务")])])}],s=(e("6d67"),{name:"BusinessDistrictMap",data:function(){return{map:null,scale:null,toolBar:null,controlBar:null,overView:null,trafficLayer:null,isTrafficVisible:!0,isWeatherVisible:!0,dropdownActive:!1,businessMarker:null,businessInfoWindow:null,weatherMarker:null,weatherInfoWin:null}},mounted:function(){window._AMapSecurityConfig={securityJsCode:"4d8d783a5463853e63b0af39aa503379"},this.loadAMapScripts(),document.addEventListener("click",this.closeDropdownOnOutsideClick),window.addEventListener("resize",this.handleWindowResize)},beforeUnmount:function(){document.removeEventListener("click",this.closeDropdownOnOutsideClick),window.removeEventListener("resize",this.handleWindowResize),this.map&&this.map.destroy()},methods:{initMap:function(){this.map=new AMap.Map("container",{center:[118.79,32.06],zoom:12,viewMode:"3D",resizeEnable:!0}),this.initMapControls(),this.initTrafficLayer(),this.initWeather()},initMapControls:function(){this.scale=new AMap.Scale,this.toolBar=new AMap.ToolBar({position:{top:"110px",right:"40px"}}),this.controlBar=new AMap.ControlBar({position:{top:"10px",right:"10px"}}),this.overView=new AMap.HawkEye({opened:!1}),this.map.addControl(this.scale),this.map.addControl(this.toolBar),this.map.addControl(this.controlBar),this.map.addControl(this.overView)},initTrafficLayer:function(){this.trafficLayer=new AMap.TileLayer.Traffic({zIndex:10,zooms:[7,22]}),this.trafficLayer.setMap(this.map)},toggleDropdown:function(){this.dropdownActive=!this.dropdownActive},closeDropdownOnOutsideClick:function(t){var i=document.getElementById("businessDistrictDropdown");i&&!i.contains(t.target)&&(this.dropdownActive=!1)},goToBusinessDistrict:function(t,i){var n=this;this.map.setCenter(i),this.map.setZoom(16),this.businessMarker&&this.map.remove(this.businessMarker),this.businessInfoWindow&&this.businessInfoWindow.close();var o=new AMap.Icon({size:new AMap.Size(32,32),image:e("cf05"),imageSize:new AMap.Size(32,32)});this.businessMarker=new AMap.Marker({map:this.map,position:i,icon:o,zIndex:20}),this.businessInfoWindow=new AMap.InfoWindow({content:'<div class="business-label">'.concat(t,"</div>"),isCustom:!0,offset:new AMap.Pixel(0,-40),autoMove:!1}),this.businessInfoWindow.open(this.map,this.businessMarker.getPosition()),this.businessMarker.on("click",(function(){n.businessInfoWindow.open(n.map,n.businessMarker.getPosition())})),this.dropdownActive=!1},toggleTraffic:function(){this.isTrafficVisible?this.trafficLayer.hide():this.trafficLayer.show(),this.isTrafficVisible=!this.isTrafficVisible},toggleScale:function(t){t.target.checked?this.scale.show():this.scale.hide()},toggleToolBar:function(t){t.target.checked?this.showToolBar():this.hideToolBar()},toggleControlBar:function(t){t.target.checked?this.controlBar.show():this.controlBar.hide()},toggleOverViewShow:function(t){t.target.checked?this.overView.show():this.overView.hide()},showToolBar:function(){document.getElementById("toolbar").checked=!0,this.toolBar.show()},hideToolBar:function(){document.getElementById("toolbar").checked=!1,this.toolBar.hide()},initWeather:function(){var t=this;AMap.plugin("AMap.Weather",(function(){var i=new AMap.Weather;i.getLive("南京市",(function(i,n){if(!i){var o=["<h4>实时天气</h4><hr>","<p>城市/区：".concat(n.city,"</p>"),"<p>天气：".concat(n.weather,"</p>"),"<p>温度：".concat(n.temperature,"℃</p>"),"<p>风向：".concat(n.windDirection,"</p>"),"<p>风力：".concat(n.windPower," 级</p>"),"<p>空气湿度：".concat(n.humidity,"</p>"),"<p>发布时间：".concat(n.reportTime,"</p>")],s=new AMap.Icon({size:new AMap.Size(32,32),image:e("cf05"),imageSize:new AMap.Size(32,32)});t.weatherMarker=new AMap.Marker({map:t.map,position:t.map.getCenter(),icon:s,zIndex:15}),t.weatherInfoWin=new AMap.InfoWindow({content:'<div class="info" style="position:inherit;margin-bottom:0;">'.concat(o.join(""),'</div><div class="sharp"></div>'),isCustom:!0,offset:new AMap.Pixel(15,-3)}),t.weatherInfoWin.open(t.map,t.weatherMarker.getPosition()),t.weatherMarker.on("mouseover",(function(){t.weatherInfoWin.open(t.map,t.weatherMarker.getPosition())}))}})),i.getForecast("南京市",(function(t,i){if(!t){var e=i.forecasts.map((function(t){return"".concat(t.date,' <span class="weather">').concat(t.dayWeather,"</span> ").concat(t.nightTemp,"~").concat(t.dayTemp,"℃")}));document.getElementById("forecast").innerHTML=e.join("<br><br>")}}))}))},toggleWeather:function(){this.isWeatherVisible?(this.weatherMarker.hide(),this.weatherInfoWin.close()):(this.weatherMarker.show(),this.weatherInfoWin.open(this.map,this.weatherMarker.getPosition())),this.isWeatherVisible=!this.isWeatherVisible},handleWindowResize:function(){this.map&&this.map.resize(),this.weatherInfoWin&&this.weatherMarker&&this.isWeatherVisible&&this.weatherInfoWin.open(this.map,this.weatherMarker.getPosition()),this.businessInfoWindow&&this.businessMarker&&this.businessInfoWindow.open(this.map,this.businessMarker.getPosition())},loadAMapScripts:function(){var t=this,i=document.createElement("script");i.src="https://cache.amap.com/lbs/static/es5.min.js",i.onload=function(){var i=document.createElement("script");i.src="//webapi.amap.com/maps?v=2.0&key=c43b5af1cea9dce07e948a07b5b91b9b&&plugin=AMap.Scale,AMap.HawkEye,AMap.ToolBar,AMap.ControlBar,AMap.Weather",i.onerror=function(t){console.error("高德地图加载失败:",t)},i.onload=function(){t.initMap()},document.body.appendChild(i)},document.body.appendChild(i)}}}),r=s,a=(e("296a"),e("2877")),c=Object(a["a"])(r,n,o,!1,null,"23e16aaa",null);i["default"]=c.exports},ae84:function(t,i,e){},cd1c:function(t,i,e){var n=e("e853");t.exports=function(t,i){return new(n(t))(i)}},cf05:function(t,i,e){t.exports=e.p+"img/logo.82b9c7a5.png"},e853:function(t,i,e){var n=e("d3f4"),o=e("1169"),s=e("2b4c")("species");t.exports=function(t){var i;return o(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!o(i.prototype)||(i=void 0),n(i)&&(i=i[s],null===i&&(i=void 0))),void 0===i?Array:i}}}]);
//# sourceMappingURL=dtfw.7968a2d7.js.map